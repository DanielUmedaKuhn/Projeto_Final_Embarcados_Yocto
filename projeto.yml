# Arquivo de configuração do KAS
header:
  version: 11 # Versão do formato KAS

repos:
  # O Poky (core do Yocto)
  poky:
    url: "git://git.yoctoproject.org/poky"
    refspec: "kirkstone" # Trava na branch kirkstone
  # Camadas OpenEmbedded (para python, networking, etc)
  meta-openembedded:
    url: "git://git.openembedded.org/meta-openembedded"
    refspec: "kirkstone"
  # Camada de Hardware da Raspberry Pi
  meta-raspberrypi:
    url: "git://git.yoctoproject.org/meta-raspberrypi"
    refspec: "kirkstone"
  # NOSSA camada (que está neste mesmo repositório)
  meta-projeto-sensor:
    path: "file://./meta-projeto-sensor" 

# Define o que vai no arquivo bblayers.conf
bblayers_conf_header:
  standard: |
    BBLAYERS ?= " \
      ${BSPDIR}/poky/meta \
      ${BSPDIR}/poky/meta-poky \
      ${BSPDIR}/meta-openembedded/meta-oe \
      ${BSPDIR}/meta-openembedded/meta-python \
      ${BSPDIR}/meta-openembedded/meta-networking \
      ${BSPDIR}/meta-raspberrypi \
      ${BSPDIR}/meta-projeto-sensor \
      "
                    
# Define o que vai no arquivo local.conf
local_conf_header:
  standard: |
    # Máquina Alvo
    MACHINE = "raspberrypi3-64"
    
    # Formato da imagem final (para gravar no SD)
    IMAGE_FSTYPES = "rpi-sdimg"
    
    # Habilitar serial (para debug)
    ENABLE_UART = "1"
    
    # Pacotes essenciais do projeto
    IMAGE_INSTALL:append = " python3-paho-mqtt python3-rpi-gpio mosquitto-clients"
    
    # Nome da nossa receita da aplicação
    IMAGE_INSTALL:append = " sensor-mqtt"
